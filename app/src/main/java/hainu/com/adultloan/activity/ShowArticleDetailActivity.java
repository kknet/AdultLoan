package hainu.com.adultloan.activity;import android.content.Intent;import android.os.Bundle;import android.util.Log;import android.view.View;import android.webkit.WebView;import android.widget.ImageView;import android.widget.Toast;import cn.bmob.v3.listener.SaveListener;import cn.bmob.v3.listener.UpdateListener;import hainu.com.adultloan.R;import hainu.com.adultloan.application.MyApplication;import hainu.com.adultloan.bean.ArticleCollection;import hainu.com.adultloan.bean.StrategyArticle;public class ShowArticleDetailActivity extends BaseActivity {	private static final String TAG = "ShowArticleActivity";	private WebView wv_showarticle_artical;	private String articleId;	@Override	protected void onCreate(Bundle savedInstanceState) {		super.onCreate(savedInstanceState);		setContentView(R.layout.activity_show_article_detail);		wv_showarticle_artical = (WebView) findViewById(R.id.wv_showarticle_artical);		showAtricel();	}	public void showAtricel(){		Intent intent = getIntent();		String articleurl = intent.getStringExtra("articleurl");		wv_showarticle_artical.loadUrl(articleurl);		String objectId = intent.getStringExtra("objectId");		int readCount = intent.getIntExtra("readCount",0);		articleId = intent.getStringExtra("articleId");		Log.i(TAG,"readCount:"+readCount);		StrategyArticle articleList = new StrategyArticle();		articleList.setReadCount(readCount+1);		//更新数据，每次阅读都将阅读量加1		articleList.update(this, objectId, new UpdateListener() {			@Override			public void onSuccess() {			}			@Override			public void onFailure(int i, String s) {				Toast.makeText(ShowArticleDetailActivity.this,""+s, Toast.LENGTH_SHORT).show();			}		});	}	public void collectArticle(View view){		ImageView iv_article_coolect = (ImageView) findViewById(R.id.iv_article_coolect);		iv_article_coolect.setImageResource(R.drawable.bottom_bar_praise_pressed);		final ArticleCollection articleCollection = new ArticleCollection();		articleCollection.setUserId(MyApplication.sharedPreferences.getString("userId",""));		articleCollection.setArticleId(articleId);		articleCollection.setType(1);  //类型为收藏		articleCollection.setCollectId("cc" + System.currentTimeMillis());						  /*String collectOllectId = MyApplication.sharedPreferences.getString("collectOllectId", "");        if (!collectOllectId.equals("")){            String collectArticleList = MyApplication.sharedPreferences.getString("collectArticleList", "");            Log.i(TAG,"collectArticleList:"+collectArticleList);            if (collectArticleList.length()>0){                String[] split = collectArticleList.substring(1, collectArticleList.length() - 1).split(",");                for (int i=0;i<split.length;i++){                    if (!split[i].equals(articleId)){                        list.add(split[i]);                    }                }            }			Log.i(TAG,"list:"+list.toString());            articleCollection.setObjectId(collectOllectId);            MyApplication.sharedPreferences.edit().putString("collectArticleList",list.toString()).commit();            articleCollection.update(this);        }*/		articleCollection.save(this, new SaveListener() {			@Override			public void onSuccess() {				Toast.makeText(ShowArticleDetailActivity.this,"收藏成功", Toast.LENGTH_SHORT).show();			}			@Override			public void onFailure(int i, String s) {				Toast.makeText(ShowArticleDetailActivity.this,"失败"+s, Toast.LENGTH_SHORT).show();			}		});	}	public void back(View view){		finish();	}}